---
title: Za pomocą migrate.exe - EF6
author: divega
ms.date: 10/23/2016
ms.assetid: 989ea862-e936-4c85-926a-8cfbef5df5b8
ms.openlocfilehash: 6e9880523bbcf2fe55390a447241e59723a0967f
ms.sourcegitcommit: 2b787009fd5be5627f1189ee396e708cd130e07b
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/13/2018
ms.locfileid: "45490229"
---
# <a name="using-migrateexe"></a><span data-ttu-id="3b7aa-102">Za pomocą migrate.exe</span><span class="sxs-lookup"><span data-stu-id="3b7aa-102">Using migrate.exe</span></span>
<span data-ttu-id="3b7aa-103">Migracje Code First pozwala zaktualizować bazę danych z wewnątrz programu visual studio, ale mogą być również wykonywane za pośrednictwem migrate.exe narzędzia wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-103">Code First Migrations can be used to update a database from inside visual studio, but can also be executed via the command line tool migrate.exe.</span></span> <span data-ttu-id="3b7aa-104">Ta strona będzie zapewniają szybki przegląd dotyczące sposobu używania migrate.exe do wykonania migracji w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-104">This page will give a quick overview on how to use migrate.exe to execute migrations against a database.</span></span>

> [!NOTE]
> <span data-ttu-id="3b7aa-105">W tym artykule przyjęto założenie, że wiesz, jak użyć migracje Code First w podstawowych scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-105">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="3b7aa-106">Jeśli tego nie zrobisz, a następnie należy odczytać [migracje Code First](~/ef6/modeling/code-first/migrations/index.md) przed kontynuowaniem.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-106">If you don’t, then you’ll need to read [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) before continuing.</span></span>

## <a name="copy-migrateexe"></a><span data-ttu-id="3b7aa-107">Skopiuj migrate.exe</span><span class="sxs-lookup"><span data-stu-id="3b7aa-107">Copy migrate.exe</span></span>

<span data-ttu-id="3b7aa-108">Po zainstalowaniu programu Entity Framework za pomocą narzędzia NuGet migrate.exe będzie znajdować się w folderze narzędzia pobranego pakietu.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-108">When you install Entity Framework using NuGet migrate.exe will be inside the tools folder of the downloaded package.</span></span> <span data-ttu-id="3b7aa-109">W &lt;folderu projektu&gt;\\pakietów\\platformy EntityFramework.&lt; Wersja&gt;\\narzędzia</span><span class="sxs-lookup"><span data-stu-id="3b7aa-109">In &lt;project folder&gt;\\packages\\EntityFramework.&lt;version&gt;\\tools</span></span>

<span data-ttu-id="3b7aa-110">Po utworzeniu migrate.exe musisz skopiować go do lokalizacji zestawu, który zawiera migracji.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-110">Once you have migrate.exe then you need to copy it to the location of the assembly that contains your migrations.</span></span>

<span data-ttu-id="3b7aa-111">Jeśli aplikacja jest przeznaczony dla .NET 4, a nie 4.5, należy skopiować **Redirect.config** w lokalizacji jako dobrze i zmień jego nazwę **migrate.exe.config**. Jest to więc migrate.exe pobiera przekierowania powiązań poprawna, aby można było zlokalizować zestawu platformy Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-111">If your application targets .NET 4, and not 4.5, then you will need to copy the **Redirect.config** into the location as well and rename it **migrate.exe.config**. This is so that migrate.exe gets the correct binding redirects to be able to locate the Entity Framework assembly.</span></span>

| <span data-ttu-id="3b7aa-112">.NET 4.5</span><span class="sxs-lookup"><span data-stu-id="3b7aa-112">.NET 4.5</span></span>                                   | <span data-ttu-id="3b7aa-113">.NET 4.0</span><span class="sxs-lookup"><span data-stu-id="3b7aa-113">.NET 4.0</span></span>                                   |
|:-------------------------------------------|:-------------------------------------------|
| ![Pliki .NET 4.5](~/ef6/media/net45files.png)  | ![Pliki .NET 4.0](~/ef6/media/net40files.png)  |

> [!NOTE]
> <span data-ttu-id="3b7aa-116">migrate.exe nie obsługuje x64 zestawów.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-116">migrate.exe doesn't support x64 assemblies.</span></span>

<span data-ttu-id="3b7aa-117">Po migrate.exe zostały przeniesione do poprawnego folderu powinno być można używać go do wykonania migracji w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-117">Once you have moved migrate.exe to the correct folder then you should be able to use it to execute migrations against the database.</span></span> <span data-ttu-id="3b7aa-118">Jest wszystko, czego narzędzie zaprojektowano w celu wykonania migracji.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-118">All the utility is designed to do is execute migrations.</span></span> <span data-ttu-id="3b7aa-119">Nie można wygenerować migracje ani utworzyć skrypt SQL.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-119">It cannot generate migrations or create a SQL script.</span></span>

## <a name="see-options"></a><span data-ttu-id="3b7aa-120">Zobacz Opcje</span><span class="sxs-lookup"><span data-stu-id="3b7aa-120">See options</span></span>

``` console
Migrate.exe /?
```

<span data-ttu-id="3b7aa-121">Powyższe spowoduje wyświetlenie strony pomocy skojarzony z tym narzędziu, należy pamiętać, że musisz mieć EntityFramework.dll w tej samej lokalizacji, migrate.exe uruchomionych w kolejności, aby to działało.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-121">The above will display the help page associated with this utility, note that you will need to have the EntityFramework.dll in the same location that you are running migrate.exe in order for this to work.</span></span>

## <a name="migrate-to-the-latest-migration"></a><span data-ttu-id="3b7aa-122">Migracja do najnowszych migracji</span><span class="sxs-lookup"><span data-stu-id="3b7aa-122">Migrate to the latest migration</span></span>

``` console
Migrate.exe MyMvcApplication.dll /startupConfigurationFile=”..\\web.config”
```

<span data-ttu-id="3b7aa-123">Podczas uruchamiania migrate.exe tylko obowiązkowy parametr jest zestawu, który jest zestaw, który zawiera migracji, które próbujesz uruchomić, lecz będzie używać konwencji wszystkie na podstawie ustawienia, jeśli nie określisz pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-123">When running migrate.exe the only mandatory parameter is the assembly, which is the assembly that contains the migrations that you are trying to run, but it will use all convention based settings if you do not specify the configuration file.</span></span>

## <a name="migrate-to-a-specific-migration"></a><span data-ttu-id="3b7aa-124">Migrowanie do dotyczące migracji</span><span class="sxs-lookup"><span data-stu-id="3b7aa-124">Migrate to a specific migration</span></span>

``` console
Migrate.exe MyApp.exe /startupConfigurationFile=”MyApp.exe.config” /targetMigration=”AddTitle”
```

<span data-ttu-id="3b7aa-125">Jeśli chcesz uruchomić migracje maksymalnie dotyczące migracji, można określić nazwę migracji.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-125">If you want to run migrations up to a specific migration, then you can specify the name of the migration.</span></span> <span data-ttu-id="3b7aa-126">Spowoduje to uruchomienie wszystkich poprzednich migracji zgodnie z wymaganiami aż do migracji, określić.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-126">This will run all previous migrations as required until getting to the migration specified.</span></span>

## <a name="specify-working-directory"></a><span data-ttu-id="3b7aa-127">Określ katalog roboczy</span><span class="sxs-lookup"><span data-stu-id="3b7aa-127">Specify working directory</span></span>

``` console
Migrate.exe MyApp.exe /startupConfigurationFile=”MyApp.exe.config” /startupDirectory=”c:\\MyApp”
```

<span data-ttu-id="3b7aa-128">Jeśli użytkownik zestawu ma zależności lub odczytuje pliki względem katalogu roboczego należy ustawić startupDirectory.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-128">If you assembly has dependencies or reads files relative to the working directory then you will need to set startupDirectory.</span></span>

## <a name="specify-migration-configuration-to-use"></a><span data-ttu-id="3b7aa-129">Określ konfigurację migracji w celu użycia</span><span class="sxs-lookup"><span data-stu-id="3b7aa-129">Specify migration configuration to use</span></span>

``` console
Migrate.exe MyAssembly CustomConfig /startupConfigurationFile=”..\\web.config”
```

<span data-ttu-id="3b7aa-130">Jeśli masz wiele klas konfiguracji migracji, klas dziedziczących DbMigrationConfiguration, należy określić, który ma być używany dla wykonania.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-130">If you have multiple migration configuration classes, classes inheriting from DbMigrationConfiguration, then you need to specify which is to be used for this execution.</span></span> <span data-ttu-id="3b7aa-131">To jest określona, zapewniając opcjonalny drugi parametr bez przełącznika jako powyżej.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-131">This is specified by providing the optional second parameter without a switch as above.</span></span>

## <a name="provide-connection-string"></a><span data-ttu-id="3b7aa-132">Podaj parametry połączenia</span><span class="sxs-lookup"><span data-stu-id="3b7aa-132">Provide connection string</span></span>

``` console
Migrate.exe BlogDemo.dll /connectionString=”Data Source=localhost;Initial Catalog=BlogDemo;Integrated Security=SSPI” /connectionProviderName=”System.Data.SqlClient”
```

<span data-ttu-id="3b7aa-133">Jeśli chcesz określić parametry połączenia, w wierszu polecenia, należy również podać nazwę dostawcy.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-133">If you wish to specify a connection string at the command line then you must also provide the provider name.</span></span> <span data-ttu-id="3b7aa-134">Nazwa dostawcy nie został podany spowoduje, że wyjątek.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-134">Not specifying the provider name will cause an exception.</span></span>

## <a name="common-problems"></a><span data-ttu-id="3b7aa-135">Typowe problemy</span><span class="sxs-lookup"><span data-stu-id="3b7aa-135">Common Problems</span></span>

| <span data-ttu-id="3b7aa-136">Komunikat o błędzie</span><span class="sxs-lookup"><span data-stu-id="3b7aa-136">Error Message</span></span>                                                                                                                                                                                                                                                                                                                      | <span data-ttu-id="3b7aa-137">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="3b7aa-137">Solution</span></span>                                                                                                                                                                                                                                                                                             |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3b7aa-138">Nieobsługiwany wyjątek: System.IO.FileLoadException: nie można załadować pliku lub zestawu "platformy EntityFramework, wersja = 5.0.0.0, Culture = neutral, PublicKeyToken = b77a5c561934e089" lub jednej z jego zależności.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-138">Unhandled Exception: System.IO.FileLoadException:  Could not load file or assembly 'EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.</span></span> <span data-ttu-id="3b7aa-139">Definicja manifestu zestawu znajduje się niezgodna odwołanie do zestawu.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-139">The located assembly's manifest definition does not match the assembly reference.</span></span> <span data-ttu-id="3b7aa-140">(Wyjątek od HRESULT: 0x80131040)</span><span class="sxs-lookup"><span data-stu-id="3b7aa-140">(Exception from HRESULT: 0x80131040)</span></span>         | <span data-ttu-id="3b7aa-141">Zwykle oznacza to, czy używasz aplikacji .NET 4, bez pliku Redirect.config.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-141">This typically means that you are running a .NET 4 application without the Redirect.config file.</span></span> <span data-ttu-id="3b7aa-142">Należy skopiować Redirect.config do tej samej lokalizacji co migrate.exe i zmień jego nazwę na migrate.exe.config.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-142">You need to copy the Redirect.config to the same location as migrate.exe and rename it to migrate.exe.config.</span></span>                                                                                       |
| <span data-ttu-id="3b7aa-143">Nieobsługiwany wyjątek: System.IO.FileLoadException: nie można załadować pliku lub zestawu "platformy EntityFramework, wersja = 4.4.0.0, Culture = neutral, PublicKeyToken = b77a5c561934e089" lub jednej z jego zależności.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-143">Unhandled Exception: System.IO.FileLoadException: Could not load file or assembly 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.</span></span> <span data-ttu-id="3b7aa-144">Definicja manifestu zestawu znajduje się niezgodna odwołanie do zestawu.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-144">The located assembly's manifest definition does not match the assembly reference.</span></span> <span data-ttu-id="3b7aa-145">(Wyjątek od HRESULT: 0x80131040)</span><span class="sxs-lookup"><span data-stu-id="3b7aa-145">(Exception from HRESULT: 0x80131040)</span></span>          | <span data-ttu-id="3b7aa-146">Ten wyjątek oznacza, że działają .NET 4.5 aplikacji przy użyciu Redirect.config skopiowane do lokalizacji migrate.exe.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-146">This exception means that you are running a .NET 4.5 application with the Redirect.config copied to the migrate.exe location.</span></span> <span data-ttu-id="3b7aa-147">Jeśli Twoja aplikacja jest .NET 4.5 nie trzeba mieć plik konfiguracji z przekierowywaniem wewnątrz.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-147">If your app is .NET 4.5 then you do not need to have the config file with the redirects inside.</span></span> <span data-ttu-id="3b7aa-148">Usuń plik migrate.exe.config.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-148">Delete the migrate.exe.config file.</span></span>                                    |
| <span data-ttu-id="3b7aa-149">Błąd: Nie można zaktualizować bazy danych do dopasowania w bieżącym modelu, ponieważ istnieją oczekujące zmiany, a następnie automatycznej migracji jest wyłączona.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-149">ERROR: Unable to update database to match the current model because there are pending changes and automatic migration is disabled.</span></span> <span data-ttu-id="3b7aa-150">Zapisać zmiany oczekujące modelu migracji za pomocą kodu lub umożliwić automatyczną migrację.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-150">Either write the pending model changes to a code-based migration or enable automatic migration.</span></span> <span data-ttu-id="3b7aa-151">Ustaw DbMigrationsConfiguration.AutomaticMigrationsEnabled na wartość PRAWDA, aby włączyć automatyczną migrację.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-151">Set DbMigrationsConfiguration.AutomaticMigrationsEnabled to true to enable automatic migration.</span></span> | <span data-ttu-id="3b7aa-152">Ten błąd występuje podczas uruchamiania migracji nie utworzono migracji, aby poradzić sobie ze zmianami wprowadzonymi w modelu, gdy baza danych nie jest zgodny z modelem.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-152">This error occurs if running migrate when you haven’t created a migration to cope with changes made to the model, and the database does not match the model.</span></span> <span data-ttu-id="3b7aa-153">Dodawanie właściwości do klasy modelu, ponownie uruchomić migrate.exe bez tworzenia migracji, aby uaktualnić bazę danych jest przykładem.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-153">Adding a property to a model class then running migrate.exe without creating a migration to upgrade the database is an example of this.</span></span> |
| <span data-ttu-id="3b7aa-154">Błąd: Typ nie zostanie rozwiązany dla elementu członkowskiego "System.Data.Entity.Migrations.Design.ToolingFacade+UpdateRunner,EntityFramework, Version = 5.0.0.0, Culture = neutral, PublicKeyToken = b77a5c561934e089".</span><span class="sxs-lookup"><span data-stu-id="3b7aa-154">ERROR: Type is not resolved for member 'System.Data.Entity.Migrations.Design.ToolingFacade+UpdateRunner,EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.</span></span>                                                                                                                                       | <span data-ttu-id="3b7aa-155">Ten błąd może być spowodowany przez określenie katalogu startup niepoprawne.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-155">This error can be caused by specifying an incorrect startup directory.</span></span> <span data-ttu-id="3b7aa-156">Musi to być lokalizacja migrate.exe</span><span class="sxs-lookup"><span data-stu-id="3b7aa-156">This must be the location of migrate.exe</span></span>                                                                                                                                                                                      |
| <span data-ttu-id="3b7aa-157">Nieobsługiwany wyjątek: System.NullReferenceException: odwołanie nie ustawione na wystąpienie obiektu do obiektu.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-157">Unhandled Exception: System.NullReferenceException: Object reference not set to an instance of an object.</span></span> <br/>   <span data-ttu-id="3b7aa-158">w System.Data.Entity.Migrations.Console.Program.Main (String [] args)</span><span class="sxs-lookup"><span data-stu-id="3b7aa-158">at System.Data.Entity.Migrations.Console.Program.Main(String[] args)</span></span>                                                                                                                                             | <span data-ttu-id="3b7aa-159">Może to być spowodowane nie został podany wymagany parametr dla scenariusza, którego używasz.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-159">This can be caused by not specifying a required parameter for a scenario that you are using.</span></span> <span data-ttu-id="3b7aa-160">Na przykład określenie parametrów połączenia bez określenia nazwy dostawcy.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-160">For example specifying a connection string without specifying the provider name.</span></span>                                                                                                                        |
| <span data-ttu-id="3b7aa-161">Błąd: znaleziono więcej niż jeden typ konfiguracji migracji w zestawie "ClassLibrary1".</span><span class="sxs-lookup"><span data-stu-id="3b7aa-161">ERROR: More than one migrations configuration type was found in the assembly 'ClassLibrary1'.</span></span> <span data-ttu-id="3b7aa-162">Określ nazwę, aby korzystać.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-162">Specify the name of the one to use.</span></span>                                                                                                                                                                                                  | <span data-ttu-id="3b7aa-163">Jak opisu błędu wynika, ma więcej niż jedną klasę konfiguracji w danym zestawie.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-163">As the error states, there is more than one configuration class in the given assembly.</span></span> <span data-ttu-id="3b7aa-164">Należy użyć przełącznika /configurationType, aby określić, której mają zostać użyte.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-164">You must use the /configurationType switch to specify which to use.</span></span>                                                                                                                                           |
| <span data-ttu-id="3b7aa-165">Błąd: Nie można załadować pliku lub zestawu '&lt;assemblyName&gt;"lub jednej z jego zależności.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-165">ERROR: Could not load file or assembly ‘&lt;assemblyName&gt;’ or one of its dependencies.</span></span> <span data-ttu-id="3b7aa-166">Dany zestaw nazwy lub codebase był nieprawidłowy.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-166">The given assembly name or codebase was invalid.</span></span> <span data-ttu-id="3b7aa-167">(Wyjątek od HRESULT: 0x80131047)</span><span class="sxs-lookup"><span data-stu-id="3b7aa-167">(Exception from HRESULT: 0x80131047)</span></span>                                                                                                                                                    | <span data-ttu-id="3b7aa-168">Może to być spowodowane przez niepoprawnie określający nazwę zestawu, lub nie ma</span><span class="sxs-lookup"><span data-stu-id="3b7aa-168">This can be caused by specifying an assembly name incorrectly or not having</span></span>                                                                                                                                                                                                                          |
| <span data-ttu-id="3b7aa-169">Błąd: Nie można załadować pliku lub zestawu '&lt;assemblyName&gt;"lub jednej z jego zależności.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-169">ERROR: Could not load file or assembly ‘&lt;assemblyName&gt;' or one of its dependencies.</span></span> <span data-ttu-id="3b7aa-170">Próbowano załadować program w niepoprawnym formacie.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-170">An attempt was made to load a program with an incorrect format.</span></span>                                                                                                                                                                          | <span data-ttu-id="3b7aa-171">Dzieje się tak, jeśli chcesz uruchamiać migrate.exe x64 aplikacji.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-171">This happens if you are trying to run migrate.exe against an x64 application.</span></span> <span data-ttu-id="3b7aa-172">EF 5.0 i poniżej spowoduje działają tylko na x86.</span><span class="sxs-lookup"><span data-stu-id="3b7aa-172">EF 5.0 and below will only work on x86.</span></span>                                                                                                                                                                                |
